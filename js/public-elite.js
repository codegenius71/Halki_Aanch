var WPRecipeMaker;(self.webpackChunkWPRecipeMaker=self.webpackChunkWPRecipeMaker||[]).push([[89,601,947],{7404:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var r=i(4558),n=(i(2998),i(942));const a={checkInbox:e=>{const t=localStorage.getItem("wprm-recipe-collection");if(t){JSON.parse(t).inbox.items["0-0"].filter((t=>t.recipeId===e)).length>0&&a.updateButtons(e)}},updateButtons:e=>{const t=document.querySelectorAll(".wprm-recipe-add-to-collection");for(let i of t)e===parseInt(i.dataset.recipeId)&&(i.classList.contains("wprm-recipe-not-in-collection")?i.style.display="none":i.classList.contains("wprm-recipe-in-collection")&&(i.style.display=""))}},o=a;var s;window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.collections={init(){if(0===parseInt(wprmp_public.user)){const e=document.querySelectorAll(".wprm-recipe-add-to-collection-recipe.wprm-recipe-not-in-collection");for(let t of e){const e=parseInt(t.dataset.recipeId);a.checkInbox(e)}if("choose"===wprmp_public.add_to_collection.behaviour){const e=localStorage.getItem("wprm-recipe-collection");if(e){const t=JSON.parse(e);wprmp_public.add_to_collection.collections.user=t.user}}}if(document.addEventListener("click",(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode)if(t.matches(".wprm-recipe-add-to-collection.wprm-recipe-not-in-collection")){window.WPRecipeMaker.collections.onClick(t,e);break}}),!1),"logged_in"===wprmp_public.add_to_collection.access&&0===parseInt(wprmp_public.user)&&wprmp_public.add_to_collection.not_logged_in_tooltip){const e=document.querySelectorAll(".wprm-recipe-add-to-collection");for(let t of e)(0,r.Ay)(t,{theme:"wprm",content:wprmp_public.add_to_collection.not_logged_in_tooltip})}},onClick(e,t){if(t.preventDefault(),"logged_in"===wprmp_public.add_to_collection.access&&0===parseInt(wprmp_public.user)){if("redirect"===wprmp_public.add_to_collection.not_logged_in){const t=wprmp_public.add_to_collection.not_logged_in_redirect;if(t&&(window.location=t),t)if(e.classList.contains("wprm-recipe-add-to-collection-grid"))window.location=t;else{const i=parseInt(e.dataset.recipeId),r=WPRecipeMaker.collections.getRecipeServings(i);window.WPRecipeMaker.manager.getRecipe(i).then((e=>{if(e){let t={timestamp:Date.now(),recipe:e.data.collection,servings:r,collection:"inbox"};localStorage.setItem("wprm-added-to-collection-before-login",JSON.stringify(t))}window.location=t}))}}}else e.classList.contains("wprm-recipe-add-to-collection-grid")?WPRecipeMaker.collections.onClickGrid(e):WPRecipeMaker.collections.onClickRecipe(e)},onClickGrid(e){const t=e.dataset.gridId;if(window.hasOwnProperty("WPUPG_Grids")&&window.WPUPG_Grids.hasOwnProperty(`wpupg-grid-${t}`)){const i=WPUPG_Grids[`wpupg-grid-${t}`];if(i){const t=i.isotope.getFilteredItemElements();let r=[];for(let e of t)e.classList.contains("wpupg-type-wprm_recipe")&&r.push({id:parseInt(e.dataset.id)});0<r.length&&("choose"===wprmp_public.add_to_collection.behaviour?WPRecipeMaker.collections.showCollectionPicker(e,(t=>{WPRecipeMaker.collections.addRecipesToCollection(e,r,t)})):WPRecipeMaker.collections.addRecipesToCollection(e,r,{id:"inbox"}))}}},onClickRecipe(e){const t=parseInt(e.dataset.recipeId),i=[{id:t,servings:WPRecipeMaker.collections.getRecipeServings(t)}];"choose"===wprmp_public.add_to_collection.behaviour?WPRecipeMaker.collections.showCollectionPicker(e,(t=>{WPRecipeMaker.collections.addRecipesToCollection(e,i,t)})):WPRecipeMaker.collections.addRecipesToCollection(e,i,{id:"inbox"})},getRecipeServings(e){const t=document.querySelectorAll(".wprm-recipe-servings-"+e);let i=0<t.length&&t[0].dataset.servings;return isNaN(i)&&(i=!1),i},currentTooltip:!1,showCollectionPicker(e,t){if(e.hasOwnProperty("_tippy")){const t=e._tippy.state.isShown;if(e._tippy.destroy(),t)return}(0,r.Ay)(e,{theme:"wprm",trigger:"click",showOnCreate:!0,allowHTML:!0,interactive:!0,content(e){window.WPRecipeMaker.collections.currentTooltip={ref:e,callback:t,collection:"",column:"",group:""};let i='<div class="wprm-add-to-collection-tooltip-container">';i+='<select class="wprm-add-to-collection-tooltip" id="wprm-add-to-collection-tooltip-collection" onchange="window.WPRecipeMaker.collections.selectCollection( this )">',i+='<option value="">'+(0,n.f)("Select a collection")+"</option>",i+='<option value="inbox">'+wprmp_public.add_to_collection.collections.inbox+"</option>";for(let t of wprmp_public.add_to_collection.collections.user)i+='<option value="user-'+t.id+'">'+t.name+"</option>";return i+="</select>","choose_column"!==wprmp_public.add_to_collection.choice&&"choose_column_group"!==wprmp_public.add_to_collection.choice||(i+='<select class="wprm-add-to-collection-tooltip" id="wprm-add-to-collection-tooltip-column" onchange="window.WPRecipeMaker.collections.selectColumn( this )" disabled="disabled">',i+='<option value="">'+(0,n.f)("Select a column")+"</option>",i+="</select>"),"choose_column_group"===wprmp_public.add_to_collection.choice&&(i+='<select class="wprm-add-to-collection-tooltip" id="wprm-add-to-collection-tooltip-group" onchange="window.WPRecipeMaker.collections.selectGroup( this )" disabled="disabled">',i+='<option value="">'+(0,n.f)("Select a group")+"</option>",i+="</select>"),i+="</div>",i},onShown(e){e.popper.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()}),!1)}})},selectCollection(e){const t=e.value;window.WPRecipeMaker.collections.currentTooltip.collection=t,window.WPRecipeMaker.collections.currentTooltip.column="",window.WPRecipeMaker.collections.currentTooltip.group="","inbox"===t?window.WPRecipeMaker.collections.madeTooltipSelection():window.WPRecipeMaker.collections.updateDropdowns()},selectColumn(e){const t=e.value;window.WPRecipeMaker.collections.currentTooltip.column=t,window.WPRecipeMaker.collections.currentTooltip.group="",window.WPRecipeMaker.collections.updateDropdowns()},selectGroup(e){const t=e.value;window.WPRecipeMaker.collections.currentTooltip.group=t,window.WPRecipeMaker.collections.madeTooltipSelection()},updateDropdowns(){const e=window.WPRecipeMaker.collections.currentTooltip,t=document.getElementById("wprm-add-to-collection-tooltip-column"),i=document.getElementById("wprm-add-to-collection-tooltip-group"),r=window.WPRecipeMaker.collections.getSelectedCollection(e.collection);if(e.column)1===r.groups.length&&i?(i.value=r.groups[0].id,window.WPRecipeMaker.collections.selectGroup(i)):i||window.WPRecipeMaker.collections.madeTooltipSelection();else{if(t){t.querySelectorAll('option:not([value=""])').forEach((e=>e.parentNode.removeChild(e)))}if(i){i.querySelectorAll('option:not([value=""])').forEach((e=>e.parentNode.removeChild(e)))}r&&(r.columns.every((e=>{let i=document.createElement("option");return i.value=e.id,i.text=e.name,t?(t.add(i),!0):(window.WPRecipeMaker.collections.currentTooltip.column=e.id,!1)})),r.groups.every((e=>{let t=document.createElement("option");return t.value=e.id,t.text=e.name,i?(i.add(t),!0):(window.WPRecipeMaker.collections.currentTooltip.group=e.id,""!==window.WPRecipeMaker.collections.currentTooltip.column&&window.WPRecipeMaker.collections.madeTooltipSelection(),!1)})),1===r.columns.length&&t&&(t.value=r.columns[0].id,window.WPRecipeMaker.collections.selectColumn(t)))}t&&(t.disabled=!r),i&&(i.disabled=!r||""===e.column)},getSelectedCollection(e){let t=!1;if("user-"===e.substring(0,5)){const i=parseInt(e.substring(5)),r=wprmp_public.add_to_collection.collections.user.find((e=>e.id===i));r&&(t=r)}return t},madeTooltipSelection(){const e=window.WPRecipeMaker.collections.currentTooltip;e.ref._tippy.destroy(),e.callback({id:e.collection,column:e.column,group:e.group})},addRecipesToCollection(e,t,i){const r=localStorage.getItem("wprm-recipe-collection");let n=!1;r&&(n=JSON.parse(r));const o=e.innerHTML;e.style.width=`${e.offsetWidth}px`,e.style.height=`${e.offsetHeight}px`,"inline"===getComputedStyle(e).display&&(e.style.display="inline-block"),e.style.opacity="0.5",e.innerHTML="...";let s={Accept:"application/json","Content-Type":"application/json"};0<parseInt(wprmp_public.user)&&(s["X-WP-Nonce"]=wprm_public.api_nonce),fetch(`${wprmp_public.endpoints.collections_helper}/add`,{method:"POST",headers:s,credentials:"same-origin",body:JSON.stringify({localCollections:n,recipes:t,collection:i})}).then((function(i){i.ok?i.json().then((i=>{if(!1===i)alert("Something went wrong. Please try again later.");else if(!0!==i){const e=!!i.hasOwnProperty("collections")&&i.collections;e&&localStorage.setItem("wprm-recipe-collection",JSON.stringify(e))}e.innerHTML=o,e.style.width="",e.style.height="",e.style.display="",e.style.opacity="";for(let e of t)a.updateButtons(e.id)})):alert("Something went wrong. Please try again later.")}))}},s=()=>{window.WPRecipeMaker.collections.init()},"loading"!=document.readyState?s():document.addEventListener("DOMContentLoaded",s)},7743:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var r=i(4558);i(2998),i(942);const n={checkTemp:e=>{const t=localStorage.getItem("wprm-recipe-collection");if(t){const i=JSON.parse(t);if(i.hasOwnProperty("temp")&&i.temp.items.hasOwnProperty("0-0")){i.temp.items["0-0"].filter((t=>t.recipeId===e)).length>0&&n.updateButtons(e)}}},updateButtons:(e,t="add")=>{const i=document.querySelectorAll(".wprm-recipe-add-to-shopping-list");for(let r of i)e===parseInt(r.dataset.recipeId)&&(r.classList.contains("wprm-recipe-not-in-shopping-list")?r.style.display="add"===t?"none":"":r.classList.contains("wprm-recipe-in-shopping-list")&&(r.style.display="add"===t?"":"none"))}},a=n;var o;window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.shoppingList={init(){if(0===parseInt(wprmp_public.user)){const e=document.querySelectorAll(".wprm-recipe-add-to-shopping-list.wprm-recipe-not-in-shopping-list");for(let t of e){const e=parseInt(t.dataset.recipeId);n.checkTemp(e)}}if(document.addEventListener("click",(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode)if(t.matches(".wprm-recipe-add-to-shopping-list.wprm-recipe-not-in-shopping-list, .wprm-recipe-add-to-shopping-list.wprm-recipe-remove-from-shopping-list")){window.WPRecipeMaker.shoppingList.onClick(t,e);break}}),!1),"logged_in"===wprmp_public.quick_access_shopping_list.access&&0===parseInt(wprmp_public.user)&&wprmp_public.add_to_collection.not_logged_in_tooltip){const e=document.querySelectorAll(".wprm-recipe-add-to-shopping-list");for(let t of e)(0,r.Ay)(t,{theme:"wprm",content:wprmp_public.add_to_collection.not_logged_in_tooltip})}},onClick(e,t){if(t.preventDefault(),"logged_in"===wprmp_public.quick_access_shopping_list.access&&0===parseInt(wprmp_public.user)){if("redirect"===wprmp_public.add_to_collection.not_logged_in){const t=wprmp_public.add_to_collection.not_logged_in_redirect;if(t){const i=parseInt(e.dataset.recipeId),r=WPRecipeMaker.shoppingList.getRecipeServings(i);window.WPRecipeMaker.manager.getRecipe(i).then((e=>{if(e){let t={timestamp:Date.now(),recipe:e.data.collection,servings:r,collection:"temp"};localStorage.setItem("wprm-added-to-collection-before-login",JSON.stringify(t))}window.location=t}))}}}else e.classList.contains("wprm-recipe-remove-from-shopping-list")?WPRecipeMaker.shoppingList.onClickRecipeRemove(e):WPRecipeMaker.shoppingList.onClickRecipe(e)},onClickRecipe(e){const t=parseInt(e.dataset.recipeId),i=[{id:t,servings:WPRecipeMaker.shoppingList.getRecipeServings(t)}];WPRecipeMaker.shoppingList.addRecipesToShoppingList(e,i)},getRecipeServings(e){const t=document.querySelectorAll(".wprm-recipe-servings-"+e);let i=0<t.length&&t[0].dataset.servings;return isNaN(i)&&(i=!1),i},addRecipesToShoppingList(e,t){const i=localStorage.getItem("wprm-recipe-collection");let r=!1;i&&(r=JSON.parse(i));const a=e.innerHTML;e.style.width=`${e.offsetWidth}px`,e.style.height=`${e.offsetHeight}px`,"inline"===getComputedStyle(e).display&&(e.style.display="inline-block"),e.style.opacity="0.5",e.innerHTML="...";let o={Accept:"application/json","Content-Type":"application/json"};0<parseInt(wprmp_public.user)&&(o["X-WP-Nonce"]=wprm_public.api_nonce),fetch(`${wprmp_public.endpoints.collections_helper}/add`,{method:"POST",headers:o,credentials:"same-origin",body:JSON.stringify({localCollections:r,recipes:t,collection:{id:"temp"}})}).then((function(i){i.ok?i.json().then((i=>{if(!1===i)alert("Something went wrong. Please try again later.");else if(!0!==i){const e=!!i.hasOwnProperty("collections")&&i.collections;e&&localStorage.setItem("wprm-recipe-collection",JSON.stringify(e))}e.innerHTML=a,e.style.width="",e.style.height="",e.style.display="",e.style.opacity="";for(let e of t)n.updateButtons(e.id,"add")})):alert("Something went wrong. Please try again later.")}))},onClickRecipeRemove(e){const t=[parseInt(e.dataset.recipeId)];WPRecipeMaker.shoppingList.removeRecipesFromShoppingList(e,t)},removeRecipesFromShoppingList(e,t){const i=localStorage.getItem("wprm-recipe-collection");let r=!1;i&&(r=JSON.parse(i));const a=e.innerHTML;e.style.width=`${e.offsetWidth}px`,e.style.height=`${e.offsetHeight}px`,"inline"===getComputedStyle(e).display&&(e.style.display="inline-block"),e.style.opacity="0.5",e.innerHTML="...";let o={Accept:"application/json","Content-Type":"application/json"};0<parseInt(wprmp_public.user)&&(o["X-WP-Nonce"]=wprm_public.api_nonce),fetch(`${wprmp_public.endpoints.collections_helper}/remove`,{method:"POST",headers:o,credentials:"same-origin",body:JSON.stringify({localCollections:r,recipes:t,collection:{id:"temp"}})}).then((function(i){i.ok?i.json().then((i=>{if(!1===i)alert("Something went wrong. Please try again later.");else if(!0!==i){const e=!!i.hasOwnProperty("collections")&&i.collections;e&&localStorage.setItem("wprm-recipe-collection",JSON.stringify(e))}e.innerHTML=a,e.style.width="",e.style.height="",e.style.display="",e.style.opacity="";for(let e of t)n.updateButtons(e,"remove")})):alert("Something went wrong. Please try again later.")}))}},o=()=>{window.WPRecipeMaker.shoppingList.init()},"loading"!=document.readyState?o():document.addEventListener("DOMContentLoaded",o)},3345:(e,t,i)=>{"use strict";var r;i(150),i(7404),i(7743);window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.submission={init(){const e=document.querySelector("#wprmprs_submit");e&&e.addEventListener("click",(e=>{this.onClickSubmit(e.target)}));const t=document.querySelectorAll('.wprm-recipe-submission input[type="file"]');for(let i of t)i.addEventListener("change",(e=>{this.checkFileSize(e.target)}))},onClickSubmit(e){e.form.reportValidity()&&(e.style.width=`${e.offsetWidth}px`,e.style.height=`${e.offsetHeight}px`,"inline"===getComputedStyle(e).display&&(e.style.display="inline-block"),e.style.opacity="0.5",e.value="...")},onSubmit:e=>!e.classList.contains("is-submitting")&&(e.classList.add("is-submitting"),!0),checkFileSize(e){const t=e.files;if(t.length){const i=t[0];let r=wprmp_public.recipe_submission.max_file_size;if(e.dataset.hasOwnProperty("maxSize")&&e.dataset.maxSize&&(r=parseInt(e.dataset.maxSize)),r<i.size){e.value="";const t=this.formatBytes(r);alert(wprmp_public.recipe_submission.text.image_size+" "+t)}}},formatBytes(e,t=2){if(0===e)return"0 Bytes";const i=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(i))+""+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}},r=()=>{window.WPRecipeMaker.submission.init()},"loading"!=document.readyState?r():document.addEventListener("DOMContentLoaded",r)},150:(e,t,i)=>{"use strict";i(4812);var r,n=i(2687);window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.conversion={init(){document.addEventListener("click",(function(e){e.target.matches(".wprm-unit-conversion")&&(e.preventDefault(),WPRecipeMaker.conversion.clickSystem(e.target))}),!1),document.addEventListener("change",(function(e){e.target.matches(".wprm-unit-conversion-dropdown")&&WPRecipeMaker.conversion.changeDropdown(e.target)}),!1),document.addEventListener("wprm-recipe-change",(e=>{"unitSystem"===e.detail.type&&window.WPRecipeMaker.manager.getRecipe(e.detail.id).then((e=>{e&&(WPRecipeMaker.conversion.updateSelectors(e),WPRecipeMaker.conversion.updateTemperatures(e),wprmp_public.settings.unit_conversion_enabled&&wprmp_public.settings.unit_conversion_remember&&localStorage.setItem("wprm-unit-system",e.data.currentSystem))}))})),setTimeout((()=>{WPRecipeMaker.conversion.setPreferedUnitSystem()}),100)},setPreferedUnitSystem(){if(wprmp_public.settings.unit_conversion_enabled&&wprmp_public.settings.unit_conversion_remember){let e=localStorage.getItem("wprm-unit-system");if(e&&(e=parseInt(e),!isNaN(e)&&0<e)){const t=window.WPRecipeMaker.manager.findRecipesOnPage();for(let i of t)window.WPRecipeMaker.manager.getRecipe(i).then((t=>{t&&t.data.currentSystem!==e&&t.setUnitSystem(e)}))}}},clickSystem(e){const t=e.dataset.recipe,i=parseInt(e.dataset.system);e.classList.contains("wprmpuc-active")||(window.WPRecipeMaker.hasOwnProperty("analytics")&&window.WPRecipeMaker.analytics.registerActionOnce(t,wprm_public.post_id,"unit-conversion",{type:"link"}),this.setSystem(t,i))},changeDropdown(e){const t=e.dataset.recipe,i=parseInt(e.value);window.WPRecipeMaker.hasOwnProperty("analytics")&&window.WPRecipeMaker.analytics.registerActionOnce(t,wprm_public.post_id,"unit-conversion",{type:"dropdown"}),this.setSystem(t,i)},setSystem(e,t){window.WPRecipeMaker.manager.getRecipe(e).then((e=>{e&&e.setUnitSystem(t)}))},updateSelectors(e){const t=document.querySelectorAll(".wprm-unit-conversion-container-"+e.id);for(let i of t){const t=i.querySelector(".wprm-unit-conversion-dropdown");if(t)t.value=e.data.currentSystem;else{const t=i.querySelectorAll(".wprm-unit-conversion");for(let i of t){const t=parseInt(i.dataset.system);e.data.currentSystem===t?i.classList.add("wprmpuc-active"):i.classList.remove("wprmpuc-active")}}}},updateTemperatures(e){if("change"===wprmp_public.settings.unit_conversion_temperature){const t=wprmp_public.settings[`unit_conversion_system_${e.data.currentSystem}_temperature`],i=document.querySelectorAll(`#wprm-recipe-container-${e.id}, .wprm-recipe-roundup-item-${e.id}, .wprm-print-recipe-${e.id}, .wprm-recipe-${e.id}-instructions-container`);for(let e of i){const i=e.querySelectorAll(".wprm-temperature-container");for(let e of i){const i=WPRecipeMaker.temperature.getData(e);if((e.dataset.hasOwnProperty("currentUnit")?e.dataset.currentUnit:i.unit)!==t){let r;if(t===i.unit)r=i.value;else{const e=(0,n.L)(i.value);r="C"===t?5*(e-32)/9:9*e/5+32,"round_5"===wprmp_public.settings.unit_conversion_temperature_precision?r=5*Math.round(r/5):"round_10"===wprmp_public.settings.unit_conversion_temperature_precision&&(r=10*Math.round(r/10)),r=(0,n.V)(r,0)}e.querySelector(".wprm-temperature-value").innerHTML=r,e.querySelector(".wprm-temperature-unit").innerHTML=` °${t}`,e.dataset.currentUnit=t}}}}}},r=()=>{window.WPRecipeMaker.conversion.init()},"loading"!=document.readyState?r():document.addEventListener("DOMContentLoaded",r)},4812:(e,t,i)=>{"use strict";var r,n=i(4558),a=(i(2998),i(2687));window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.advancedServings={load(){document.addEventListener("wprm-recipe-change",(e=>{"servings"===e.detail.type&&window.WPRecipeMaker.manager.getRecipe(e.detail.id).then((e=>{e&&WPRecipeMaker.advancedServings.adjustedServingsDirectly(e)})),"advancedServings"===e.detail.type&&window.WPRecipeMaker.manager.getRecipe(e.detail.id).then((e=>{e&&WPRecipeMaker.advancedServings.updateAdvancedServingsDisplay(e)})),"unitSystem"===e.detail.type&&window.WPRecipeMaker.manager.getRecipe(e.detail.id).then((e=>{e&&WPRecipeMaker.advancedServings.updateUnitOnUnitSystemChange(e)}))})),window.WPRecipeMaker.advancedServings.init()},init(){if(!document.querySelector("body").classList.contains("wprm-print")){const e=document.querySelectorAll("span.wprm-recipe-advanced-servings-input");for(let t of e){let e=document.createElement("a");e.innerHTML=t.innerHTML,e.setAttribute("href","#"),e.setAttribute("role","button");const i=[...t.attributes].reduce(((e,t)=>(e[t.name]=t.value,e)),{});for(let t of Object.keys(i))e.setAttribute(t,i[t]);t.parentNode.replaceChild(e,t),e.onclick=e=>{e.preventDefault(),WPRecipeMaker.advancedServings.onClickInput(e.target)},i.hasOwnProperty("aria-label")&&(0,n.Ay)(e,{theme:"wprm",content:i["aria-label"]})}}},onClickInput(e){e.classList.contains("wprm-recipe-advanced-servings-input-shape")?WPRecipeMaker.advancedServings.toggleShape(e):e.classList.contains("wprm-recipe-advanced-servings-input-unit")?WPRecipeMaker.advancedServings.toggleUnit(e):WPRecipeMaker.advancedServings.changeNumber(e)},changeNumber(e){WPRecipeMaker.advancedServings.getRecipeFromElem(e).then((t=>{if(t){const i=e.getAttribute("aria-label"),r=e.innerText,n=prompt(`${i}:`,r);if(n){const i=WPRecipeMaker.advancedServings.parse(n);if(i&&0<i){let r={};r[e.dataset.type]=i,t.setAdvancedServings(r)}}}}))},toggleShape(e){WPRecipeMaker.advancedServings.getRecipeFromElem(e).then((e=>{if(e){const t="round"===e.data.currentAdvancedServings.shape?"rectangle":"round";e.setAdvancedServings({shape:t})}}))},toggleUnit(e){WPRecipeMaker.advancedServings.getRecipeFromElem(e).then((e=>{if(e){const t="cm"===e.data.currentAdvancedServings.unit?"inch":"cm";e.setAdvancedServings({unit:t})}}))},adjustedServingsDirectly(e){const t=WPRecipeMaker.advancedServings.getServingsFromAdvancedServings(e),i=e.data.currentServingsParsed;i!==t&&(i===e.data.originalServingsParsed?e.setAdvancedServings(e.data.originalAdvancedServings):e.setAdvancedServings({diameter:"?",width:"?",length:"?"}))},getRecipeFromElem(e){let t=!1;for(var i=e.parentNode;i&&i!=document;i=i.parentNode)if(i.matches(".wprm-recipe-advanced-servings-container")){t=i;break}return t?window.WPRecipeMaker.manager.getRecipe(t.dataset.recipe):Promise.resolve(!1)},updateUnitOnUnitSystemChange(e){if(wprmp_public.settings.unit_conversion_advanced_servings_conversion){const t=wprmp_public.settings[`unit_conversion_system_${e.data.currentSystem}_length_unit`];t!==e.data.currentAdvancedServings.unit&&e.setAdvancedServings({unit:t})}},updateAdvancedServingsDisplay(e){const t=document.querySelectorAll(`.wprm-recipe-advanced-servings-${e.id}-container`),i=e.data.currentAdvancedServings;for(let n of t){const e=n.querySelector(".wprm-recipe-advanced-servings-input-shape");e.innerHTML=e.dataset[`shape${i.shape[0].toUpperCase()+i.shape.slice(1)}`],"round"===i.shape?(n.querySelector(".wprm-recipe-advanced-servings-round").style.display="",n.querySelector(".wprm-recipe-advanced-servings-rectangle").style.display="none"):(n.querySelector(".wprm-recipe-advanced-servings-rectangle").style.display="",n.querySelector(".wprm-recipe-advanced-servings-round").style.display="none");const t=n.querySelectorAll(".wprm-recipe-advanced-servings-input-unit");for(let r of t)r.innerHTML=r.dataset[`unit${i.unit[0].toUpperCase()+i.unit.slice(1)}`];n.querySelector(".wprm-recipe-advanced-servings-input-diameter").innerHTML=WPRecipeMaker.advancedServings.format(i.diameter),n.querySelector(".wprm-recipe-advanced-servings-input-width").innerHTML=WPRecipeMaker.advancedServings.format(i.width),n.querySelector(".wprm-recipe-advanced-servings-input-length").innerHTML=WPRecipeMaker.advancedServings.format(i.length),i.height&&(n.querySelector(".wprm-recipe-advanced-servings-input-height").innerHTML=WPRecipeMaker.advancedServings.format(i.height))}const r=WPRecipeMaker.advancedServings.getServingsFromAdvancedServings(e);r&&e.setServings(r)},getServingsFromAdvancedServings(e){if(e){const t=e.data.currentAdvancedServings,i=e.data.originalAdvancedServings;if("?"===t.height)return!1;if("round"===t.shape){if("?"===t.diameter)return!1}else if("?"===t.width||"?"===t.length)return!1;const r=0<i.height;let n=WPRecipeMaker.advancedServings.getArea(i),a=WPRecipeMaker.advancedServings.getArea(t);if(r){n*="inch"===i.unit?2.54*i.height:i.height,a*="inch"===t.unit?2.54*t.height:t.height}const o=a/n;return e.data.originalServingsParsed*o}return!1},getArea(e){let t=e.diameter/2,i=e.width,r=e.length;return"inch"===e.unit&&(t*=2.54,i*=2.54,r*=2.54),"round"===e.shape?Math.PI*t*t:i*r},parse:e=>(0,a.L)(e),format(e){const t=(0,a.V)(e,wprmp_public.settings.adjustable_servings_round_to_decimals);return isNaN(t)?e:t}},r=()=>{window.WPRecipeMaker.advancedServings.load()},"loading"!=document.readyState?r():document.addEventListener("DOMContentLoaded",r);i(4123);window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.managerPremiumIngredients={load(){document.addEventListener("wprm-recipe-change",(e=>{"servings"!==e.detail.type&&"unitSystem"!==e.detail.type||window.WPRecipeMaker.manager.getRecipe(e.detail.id).then((e=>{e&&WPRecipeMaker.managerPremiumIngredients.updateIngredientsDisplay(e)}))}))},getCurrentIngredients(e){e.data.hasOwnProperty("ingredientsElements")||window.WPRecipeMaker.managerPremiumIngredients.findIngredientsElements(e);let t=[];const i=e.data.currentServingsParsed===e.data.originalServingsParsed&&e.data.currentSystem===e.data.originalSystem;for(let r=0;r<e.data.ingredients.length;r++){const n=e.data.ingredients[r];let a={};for(let t=1;t<=2;t++){let r,o;n.unit_systems.hasOwnProperty("unit-system-"+t)?(r=n.unit_systems["unit-system-"+t],o=!1):(r=n.unit_systems["unit-system-"+(t%2+1)],o=!0);let s=wprmp_public.settings.fractions_enabled;wprmp_public.settings.unit_conversion_enabled&&window.WPRecipeMaker.hasOwnProperty("conversion")&&(s=!wprmp_public.settings.hasOwnProperty(`unit_conversion_system_${t}_fractions`)||wprmp_public.settings[`unit_conversion_system_${t}_fractions`]);let c=r.amount,p=r.amountString,l=!1,d=!1;for(let t=0;t<r.amountParts.length;t++){const i=r.amountParts[t].numberUnitQuantity*e.data.currentServingsParsed;!isNaN(i)&&0<i&&(0===t&&(d=i<=1,l=i),p=p.replace(`%wprm${t}%`,this.format(i,s)))}!1===/%wprm\d+%/g.test(p)&&(c=p),i?c=r.amount:e.data.currentServingsParsed!==e.data.originalServingsParsed||o||(c=r.amount);let m=r.unitParsed;if(!i)if(e.data.currentServingsParsed!==e.data.originalServingsParsed||o){const e=!!r.hasOwnProperty("unit_singular")&&r.unit_singular,t=!!r.hasOwnProperty("unit_plural")&&r.unit_plural;m=r.unitParsed,e&&t&&(m=d?e:t)}else m=r.unitParsed;let u=n.name,w=!1;if(!i){const e=!!n.hasOwnProperty("name_singular")&&n.name_singular,t=!!n.hasOwnProperty("name_plural")&&n.name_plural;e&&t&&(w=!0,u=d?e:t)}a["unit-system-"+t]={amount:c,amountParsed:l,amountIsSingular:d,unit:m,name:u,needsNameChange:w}}t.push(a)}return t},updateIngredientsDisplay(e){e.data.hasOwnProperty("ingredientsElements")||window.WPRecipeMaker.managerPremiumIngredients.findIngredientsElements(e);const t=e.data.hasOwnProperty("overrideContainerId")&&!1!==e.data.overrideContainerId?e.data.overrideContainerId:e.id,i=e.data.currentServingsParsed===e.data.originalServingsParsed&&e.data.currentSystem===e.data.originalSystem,r=window.WPRecipeMaker.managerPremiumIngredients.getCurrentIngredients(e);for(let n=0;n<e.data.ingredients.length;n++){const a=e.data.ingredients[n],o=e.data.ingredientsElements[n],s=r[n];for(let t of o){for(let r=0;r<t.amounts.length;r++){const n=t.amounts[r];let a=e.data.currentSystem;t.showingBothUnitSystems&&1===r&&(a=a%2+1);const o=s["unit-system-"+a];n.elem.innerHTML=i?n.original:o.amount,t.units.hasOwnProperty(r)&&(t.units[r].elem.innerHTML=i?t.units[r].original:o.unit)}t.name&&(s["unit-system-"+e.data.currentSystem].needsNameChange?t.name.elem.innerHTML=s["unit-system-"+e.data.currentSystem].name:t.name.elem.innerHTML=t.name.original)}if(!1!==a.uid&&1<=o.length){const e=document.querySelectorAll(".wprm-inline-ingredient-"+t+"-"+a.uid+", .wprm-recipe-instruction-ingredient-"+t+"-"+a.uid);if(0<e.length){let t="";for(let e of o){const i=document.createElement("div");i.innerHTML=e.elem.innerHTML;const r=i.querySelector(".wprm-recipe-ingredient-notes");r&&r.remove();const n=i.querySelector(".wprm-checkbox-container");if(n&&n.remove(),t=i.innerText,t=t.replace(/\s\s+/g," "),t=t.trim(),t)break}if(t)for(let i of e){let e="";i.dataset.hasOwnProperty("separator")&&(e=i.dataset.separator),i.innerText=t+e}}}}window.WPRecipeMaker.quantities.findAdjustables(e)},findIngredientsElements(e){let t=[];for(let n=0;n<e.data.ingredients.length;n++){const i=e.data.ingredients[n];for(let t of Object.keys(i.unit_systems)){const r=i.unit_systems[t],a=window.WPRecipeMaker.managerPremiumIngredients.parseAmountString(r.amount,e.data.originalServingsParsed);e.data.ingredients[n].unit_systems[t]={...e.data.ingredients[n].unit_systems[t],...a}}t[n]=[]}const i=e.data.hasOwnProperty("overrideContainerId")&&!1!==e.data.overrideContainerId?e.data.overrideContainerId:e.id,r=document.querySelectorAll(`#wprm-recipe-container-${i}, .wprm-recipe-roundup-item-${i}, .wprm-print-recipe-${i}, .wprm-recipe-${i}-ingredients-container, .wprm-recipe-${i}-instructions-container`);for(let n of r){const i=n.querySelectorAll(".wprm-recipe-ingredient");for(let r=0;r<i.length;r++){const n=i[r];if(!n.dataset.hasOwnProperty("wprmParsed")){let i={elem:n,showingBothUnitSystems:!1,amounts:[],units:[],name:!1,notes:!1};n.querySelector(".wprm-recipe-ingredient-unit-system")&&(i.showingBothUnitSystems=!0);const o=n.querySelectorAll(".wprm-recipe-ingredient-amount");for(let t of o)i.amounts.push({elem:t,original:t.innerHTML,unitQuantity:(0,a.L)(t.innerText)/e.data.originalServingsParsed});const s=n.querySelectorAll(".wprm-recipe-ingredient-unit");for(let e of s)i.units.push({elem:e,original:e.innerHTML});const c=n.querySelector(".wprm-recipe-ingredient-name");c&&(i.name={elem:c,original:c.innerHTML});const p=n.querySelector(".wprm-recipe-ingredient-notes");p&&(i.notes={elem:p,original:p.innerHTML}),n.dataset.wprmParsed=!0,t.hasOwnProperty(r)&&t[r].push(i)}}}window.WPRecipeMaker.manager.changeRecipeData(e.id,{ingredientsElements:t})},parseAmountString(e,t){e=(e=(e=e.replace(/&quot;/g,'"')).replace(/&#39;/g,"'")).replace(/&amp;/g,"&");let i=!1;if(/^\.\d+\s*$/.test(e))i=[e];else{const t="¼½¾⅐⅑⅒⅓⅔⅕⅖⅗⅘⅙⅚⅛⅜⅝⅞",r="[\\d"+t+"]([\\d"+t+".,\\/\\s]*[\\d"+t+"])?",n=e.match(new RegExp(r,"g"));n&&(i=n)}let r=[];if(i){for(let n=0;n<i.length;n++){const o=i[n];e=e.replace(o,"%wprmtemporaryplaceholder%");const s=(0,a.L)(o);r.push({number:o,numberParsed:s,numberUnitQuantity:s/t})}for(let t=0;t<i.length;t++)e=e.replace("%wprmtemporaryplaceholder%",`%wprm${t}%`)}return{amountString:e,amountParts:r}},format:(e,t=!0)=>(0,a.V)(e,wprmp_public.settings.adjustable_servings_round_to_decimals,t)},function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}((()=>{window.WPRecipeMaker.managerPremiumIngredients.load()})),window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.managerPremium={loadRecipeObject:(e,t)=>({...t,data:{...t.data},addRating:t=>(window.WPRecipeMaker.hasOwnProperty("analytics")&&window.WPRecipeMaker.analytics.registerAction(e,wprm_public.post_id,"user-rating",{rating:t.rating}),window.WPRecipeMaker.userRating.addRatingForRecipe(t,e).then((t=>!1!==t&&(window.WPRecipeMaker.manager.changeRecipeData(e,{rating:t}),window.WPRecipeMaker.manager.triggerChangeEvent(e,"rating"),!0)))),setServings:(i,r=!1)=>{const n=(0,a.L)(i),o=(0,a.V)(n,wprmp_public.settings.adjustable_servings_round_to_decimals,!1),s=n/t.data.originalServingsParsed;window.WPRecipeMaker.manager.changeRecipeData(e,{currentServings:i,currentServingsParsed:n,currentServingsFormatted:o,currentServingsMultiplier:s,overrideContainerId:r}),window.WPRecipeMaker.manager.triggerChangeEvent(e,"servings")},setAdvancedServings:t=>{window.WPRecipeMaker.manager.getRecipe(e).then((i=>{if(t.hasOwnProperty("unit")&&t.unit!==i.data.currentAdvancedServings.unit){const e=2.54,r="cm"===t.unit?e:1/e;"?"!==i.data.currentAdvancedServings.diameter&&(t.diameter=Math.round(i.data.currentAdvancedServings.diameter*r)),"?"!==i.data.currentAdvancedServings.width&&(t.width=Math.round(i.data.currentAdvancedServings.width*r)),"?"!==i.data.currentAdvancedServings.length&&(t.length=Math.round(i.data.currentAdvancedServings.length*r)),"?"!==i.data.currentAdvancedServings.height&&(t.height=Math.round(i.data.currentAdvancedServings.height*r))}window.WPRecipeMaker.manager.changeRecipeData(e,{currentAdvancedServings:{...i.data.currentAdvancedServings,...t}}),window.WPRecipeMaker.manager.triggerChangeEvent(e,"advancedServings")}))},setUnitSystem:i=>{i=parseInt(i),t.data.unitSystems.includes(i)&&(window.WPRecipeMaker.manager.changeRecipeData(e,{currentSystem:i}),window.WPRecipeMaker.manager.triggerChangeEvent(e,"unitSystem"))}})};i(4096),i(5095);var o=i(942);window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.quantities={load(){if(document.addEventListener("input",(function(e){e.target.matches("input.wprm-recipe-servings")&&WPRecipeMaker.quantities.inputChange(e.target)}),!1),document.addEventListener("change",(function(e){e.target.matches("input.wprm-recipe-servings")&&WPRecipeMaker.quantities.inputChange(e.target)}),!1),document.addEventListener("click",(function(e){e.target.matches(".wprm-recipe-servings-change")&&WPRecipeMaker.quantities.changeClick(e.target),e.target.matches(".wprm-recipe-adjustable-servings")&&WPRecipeMaker.quantities.multiplierClick(e.target)}),!1),document.addEventListener("keypress",(function(e){if(e.target.matches(".wprm-recipe-servings-change")){const t=e.which||e.keyCode||0;13!==t&&32!==t||(WPRecipeMaker.quantities.changeClick(e.target),e.preventDefault())}}),!1),document.addEventListener("wprm-recipe-change",(e=>{"servings"===e.detail.type&&window.WPRecipeMaker.manager.getRecipe(e.detail.id).then((e=>{e&&(WPRecipeMaker.quantities.updateServingsDisplay(e),WPRecipeMaker.quantities.updateAdjustables(e),document.dispatchEvent(new CustomEvent("wprmAdjustedServings",{detail:e.id})))})),"unitSystem"===e.detail.type&&window.WPRecipeMaker.manager.getRecipe(e.detail.id).then((e=>{e&&WPRecipeMaker.quantities.updateAdjustables(e)}))})),window.WPRecipeMaker.quantities.init(),wprmp_public.settings.adjustable_servings_url){const e=wprmp_public.settings.adjustable_servings_url_param;if(e){const t=new URLSearchParams(window.location.search),i=parseFloat(t.get(e));if(!isNaN(i)&&0<i){const e=window.WPRecipeMaker.manager.findRecipesOnPage();for(let t of e)window.WPRecipeMaker.manager.getRecipe(t).then((e=>{e.setServings(i)}))}}}},init(){const e=document.querySelectorAll(".wprm-recipe-servings");for(let t of e)if(!t.dataset.hasOwnProperty("servings")){const e=this.parse(t.innerText);0<e&&(t.dataset.servings=e,t.dataset.originalServings=e,document.querySelector("body").classList.contains("wprm-print")||("modern"===wprmp_public.settings.recipe_template_mode?t.classList.contains("wprm-recipe-servings-adjustable-tooltip")?this.initTooltipSlider(t):t.classList.contains("wprm-recipe-servings-adjustable-text")?this.initTextInput(t):t.classList.contains("wprm-recipe-servings-adjustable-text-buttons")&&this.initTextButtonsInput(t):wprmp_public.settings.features_adjustable_servings&&("text_field"===wprmp_public.settings.servings_changer_display?this.initTextInput(t):this.initTooltipSlider(t))))}},getRecipeIdFromElem(e){let t=e.dataset.recipe;if(!t)for(var i=e.parentNode;i&&i!=document;i=i.parentNode)if(i.matches(".wprm-recipe-container")){t=i.dataset.recipeId;break}return t},initTextInput(e){let t=e.dataset.servings,i=this.getRecipeIdFromElem(e),r=e.getAttribute("aria-label");if(i){const n='<input type="number" class="wprm-recipe-servings wprm-recipe-servings-'+i+'" min="0" step="any" value="'+t+'" data-recipe="'+i+'" aria-label="'+r+'" />';e.outerHTML=n}},initTextButtonsInput(e){let t=e.dataset.servings,i=this.getRecipeIdFromElem(e),r=e.getAttribute("aria-label");if(i){let n="";n+="background-color: "+e.dataset.buttonBackground+";",n+="border-color: "+e.dataset.buttonBackground+";",n+="color: "+e.dataset.buttonAccent+";",n+="border-radius: "+e.dataset.buttonRadius+";";let a="";a+="border-color: "+e.dataset.buttonBackground+";";const s='<span class="wprm-recipe-servings-decrement wprm-recipe-servings-change" style="'+n+'" role="button" tabindex="0" aria-label="'+(0,o.f)("Decrease serving size by 1")+'">–</span>',c='<input type="text" class="wprm-recipe-servings wprm-recipe-servings-'+i+'" min="0" step="any" value="'+t+'" data-recipe="'+i+'" aria-label="'+r+'" style="'+a+'"/>',p='<span class="wprm-recipe-servings-increment wprm-recipe-servings-change" style="'+n+'" role="button" tabindex="0" aria-label="'+(0,o.f)("Increase serving size by 1")+'">+</span>';e.outerHTML='<span class="wprm-recipe-servings-text-buttons-container">'+s+c+p+"</span>"}},initTooltipSlider(e){let t=this.getRecipeIdFromElem(e),i=e.getAttribute("aria-label");if(t){let r=document.createElement("a");r.href="#",r.classList.add("wprm-recipe-servings-link"),r.setAttribute("aria-label",i),e.parentNode.insertBefore(r,e),r.appendChild(e);const a=(0,n.Ay)(r,{theme:"wprm",content:"",onShow(e){window.WPRecipeMaker.manager.getRecipe(t).then((r=>{if(!r)return!1;{const n=r.data.currentServingsParsed,a=20<2*n?2*n:20,o=function(e){const t=e.toString().split(".");return t.length>1?t[1].length:0}(n),s=1/Math.pow(10,o);e.setContent(`<input id="wprm-recipe-servings-slider-input" type="range" min="1" max="${a}" step="${s}" value="${n}" data-recipe="${t}" class="wprm-recipe-servings-slider wprm-recipe-servings-${t}" aria-label="${i}" oninput="WPRecipeMaker.quantities.inputChange(this)" onchange="WPRecipeMaker.quantities.inputChange(this)"></input>`)}}))},allowHTML:!0,interactive:!0,delay:[0,250]});r.onclick=e=>{e.preventDefault(),a.show(),setTimeout((()=>{const e=document.getElementById("wprm-recipe-servings-slider-input");e&&e.focus()}),250)}}},inputChange(e){let t=e.value,i=e.dataset.recipe;if(t){const r=e.classList.contains("wprm-recipe-servings-slider")?"slider":"input";window.WPRecipeMaker.analytics.registerActionOnce(i,wprm_public.post_id,"adjust-servings",{type:r}),this.setServings(i,t)}},changeClick(e){const t=e.closest(".wprm-recipe-servings-text-buttons-container");if(t){const i=t.querySelector("input"),r=this.parse(i.value);let n=r;e.classList.contains("wprm-recipe-servings-decrement")&&r>1?n--:e.classList.contains("wprm-recipe-servings-increment")&&n++,n!==r&&(i.value=n,this.inputChange(i))}},multiplierClick(e){if(!e.classList.contains("wprm-toggle-active")||"?"===e.dataset.multiplier){const t=e.dataset.multiplier,i=e.dataset.recipe,r=e.dataset.servings;let n=!1;"?"===t?(n=prompt(e.getAttribute("aria-label")),n&&(n=this.parse(n))):n=this.parse(r)*this.parse(t),n&&(window.WPRecipeMaker.analytics.registerActionOnce(i,wprm_public.post_id,"adjust-servings",{type:"button"}),this.setServings(i,n))}},setServings(e,t){window.WPRecipeMaker.manager.getRecipe(e).then((e=>{e&&e.setServings(t)}))},updateServingsDisplay(e){const t=e.data.hasOwnProperty("overrideContainerId")&&!1!==e.data.overrideContainerId?e.data.overrideContainerId:e.id,i=document.querySelectorAll(".wprm-recipe-servings-"+t);for(let n of i)n.textContent=e.data.currentServingsFormatted,n.dataset.servings=e.data.currentServingsParsed,"input"===n.tagName.toLowerCase()?"string"==typeof e.data.currentServings||e.data.currentServings instanceof String?n.value=e.data.currentServings:n.value=e.data.currentServingsFormatted:n.value=e.data.currentServingsParsed;const r=document.querySelectorAll(".wprm-recipe-adjustable-servings-"+t+"-container");for(let n of r){const t=n.querySelectorAll(".wprm-recipe-adjustable-servings");let i=!1;for(let r of t)r.classList.remove("wprm-toggle-active"),(0,a.L)(r.dataset.multiplier)===e.data.currentServingsMultiplier?(i=!0,r.classList.add("wprm-toggle-active")):"?"!==r.dataset.multiplier||i||r.classList.add("wprm-toggle-active")}},updateAdjustables(e){e.data.hasOwnProperty("adjustables")||window.WPRecipeMaker.quantities.findAdjustables(e);for(let t of e.data.adjustables)if(e.data.currentServingsParsed===e.data.originalServingsParsed)t.elem.textContent=t.original;else{const i=e.data.currentServings*t.unitQuantity;if(!isNaN(i)){let r=!0;if(wprmp_public.settings.unit_conversion_enabled&&window.WPRecipeMaker.hasOwnProperty("conversion")){const t=e.data.hasOwnProperty("currentSystem")?e.data.currentSystem:1;r=!wprmp_public.settings.hasOwnProperty(`unit_conversion_system_${t}_fractions`)||wprmp_public.settings[`unit_conversion_system_${t}_fractions`]}t.elem.textContent=this.format(i,r)}}},findAdjustables(e){let t=e.data.hasOwnProperty("adjustables")?e.data.adjustables:[];for(let r=t.length-1;r>=0;r--)document.body.contains(t[r].elem)||t.splice(r,1);const i=document.querySelectorAll(`#wprm-recipe-container-${e.id}, .wprm-recipe-roundup-item-${e.id}, .wprm-print-recipe-${e.id}, .wprm-recipe-${e.id}-ingredients-container, .wprm-recipe-${e.id}-instructions-container`);for(let r of i){const i=r.querySelectorAll(".wprm-dynamic-quantity");for(let e of i)if(0===e.querySelectorAll(".wprm-adjustable").length){let t=e.innerText;if(/^\.\d+\s*$/.test(t))e.innerHTML='<span class="wprm-adjustable">'+t+"</span>";else{const i="¼½¾⅐⅑⅒⅓⅔⅕⅖⅗⅘⅙⅚⅛⅜⅝⅞",r="[\\d"+i+"]([\\d"+i+".,\\/\\s]*[\\d"+i+"])?",n='<span class="wprm-adjustable">$&</span>';t=t.replace(new RegExp(r,"g"),n),e.innerHTML=t}}const n=r.querySelectorAll(".wpurp-adjustable-quantity");for(let e of n)e.classList.add("wprm-adjustable");const o=r.querySelectorAll(".wprm-adjustable");for(let r of o)-1===t.findIndex((e=>e.elem===r))&&t.push({elem:r,original:r.innerText,unitQuantity:(0,a.L)(r.innerText)/e.data.originalServingsParsed})}window.WPRecipeMaker.manager.changeRecipeData(e.id,{adjustables:t})},parse:e=>(0,a.L)(e),format:(e,t=!0)=>(0,a.V)(e,wprmp_public.settings.adjustable_servings_round_to_decimals,t)},function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}((()=>{window.WPRecipeMaker.quantities.load()})),window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.timer={init:()=>{const e=document.querySelector("body");if(e&&e.classList.contains("wprm-print"))return;const t=document.querySelectorAll(".wprm-timer");for(let i of t){const e=i.dataset.seconds;if(e>0){let t=document.createElement("a");t.href="#",t.classList.add("wprm-timer-link"),t.onclick=t=>{t.preventDefault(),t.stopPropagation(),window.WPRecipeMaker.timer.start(e)},i.parentNode.insertBefore(t,i),t.appendChild(i),(0,n.Ay)(t,{theme:"wprm",content:wprmp_public.timer.text.start_timer})}}},runningTimer:!1,runningTotal:0,runningRemaining:0,lastUpdated:0,update:()=>{const e=Date.now()-window.WPRecipeMaker.timer.lastUpdated;window.WPRecipeMaker.timer.runningRemaining-=e,window.WPRecipeMaker.timer.lastUpdated=Date.now();const t=window.WPRecipeMaker.timer.runningTotal;let i=window.WPRecipeMaker.timer.runningRemaining;i<=0&&(i=0,window.WPRecipeMaker.timer.finished()),window.WPRecipeMaker.timer.showTime(Math.round(i/1e3));const r=100*(t-i)/t;document.querySelector("#wprm-timer-bar-elapsed").style.width=r+"%"},start:e=>{window.WPRecipeMaker.timer.stop((()=>{window.WPRecipeMaker.timer.createContainer(),window.WPRecipeMaker.timer.runningTotal=1e3*e,window.WPRecipeMaker.timer.runningRemaining=1e3*e,window.WPRecipeMaker.timer.showTime(e),window.WPRecipeMaker.timer.play()}))},play:()=>{document.querySelector("#wprm-timer-play").style.display="none",document.querySelector("#wprm-timer-pause").style.display="",window.WPRecipeMaker.timer.interval&&clearInterval(window.WPRecipeMaker.timer.interval),window.WPRecipeMaker.timer.interval=setInterval(window.WPRecipeMaker.timer.update,1e3),window.WPRecipeMaker.timer.lastUpdated=Date.now()},pauze:()=>{document.querySelector("#wprm-timer-play").style.display="",document.querySelector("#wprm-timer-pause").style.display="none",window.WPRecipeMaker.timer.interval&&clearInterval(window.WPRecipeMaker.timer.interval)},stop:(e=!1)=>{window.WPRecipeMaker.timer.interval&&clearInterval(window.WPRecipeMaker.timer.interval);let t=document.querySelector("#wprm-timer-container");t&&t.parentNode.removeChild(t),e&&e()},finished:()=>{window.WPRecipeMaker.timer.pauze();new Audio(wprmp_public.timer.sound_file).play(),document.querySelector("#wprm-timer-container").classList.add("wprm-timer-finished")},createContainer:()=>{let e=document.createElement("div");e.id="wprm-timer-container",e.innerHTML='<span id="wprm-timer-play" class="wprm-timer-icon" onclick="window.WPRecipeMaker.timer.play()">'+wprmp_public.timer.icons.play+"</span>",e.innerHTML+='<span id="wprm-timer-pause" class="wprm-timer-icon" onclick="window.WPRecipeMaker.timer.pauze()">'+wprmp_public.timer.icons.pause+"</span>",e.innerHTML+='<span id="wprm-timer-remaining"></span>',e.innerHTML+='<span id="wprm-timer-bar-container"><span id="wprm-timer-bar"><span id="wprm-timer-bar-elapsed"></span></span></span>',e.innerHTML+='<span id="wprm-timer-close" class="wprm-timer-icon" onclick="window.WPRecipeMaker.timer.stop()">'+wprmp_public.timer.icons.close+"</span>",document.querySelector("body").appendChild(e)},showTime:e=>{var t=Math.floor(e/3600);e-=3600*t;var i=Math.floor(e/60);const r=(t<10?"0"+t:t)+":"+(i<10?"0"+i:i)+":"+((e-=60*i)<10?"0"+e:e);document.querySelector("#wprm-timer-remaining").textContent=r}},function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}((()=>{window.WPRecipeMaker.timer.init()}));i(2359);var s=i(5266);window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.userRating={init(){document.addEventListener("wprm-recipe-change",(e=>{if("rating"===e.detail.type){const t=e.detail.id;window.WPRecipeMaker.manager.getRecipe(t).then((e=>{e&&window.WPRecipeMaker.userRating.updateRatingDisplay(t,e.data.rating)}))}}))},settings:{color:wprmp_public.settings.template_color_icon},enter(e){e.parentNode.classList.add("wprm-user-rating-voting");let t=window.WPRecipeMaker.userRating.settings.color;"modern"===wprmp_public.settings.recipe_template_mode&&e.dataset.color&&(t=e.dataset.color);let i=e;for(;i;){i.classList.add("wprm-rating-star-selecting-filled");const e=i.querySelectorAll("polygon");for(let i of e)i.style.fill=t;i=i.previousSibling}let r=e.nextSibling;for(;r;){r.classList.add("wprm-rating-star-selecting-empty");const e=r.querySelectorAll("polygon");for(let t of e)t.style.fill="none";r=r.nextSibling}},leave(e){e.parentNode.classList.remove("wprm-user-rating-voting");let t=e.parentNode.firstChild;for(;t;){t.classList.remove("wprm-rating-star-selecting-filled"),t.classList.remove("wprm-rating-star-selecting-empty");const e=t.querySelectorAll("polygon");for(let t of e)t.style.fill="";t=t.nextSibling}},click(e,t){const i=t.which||t.keyCode||0;if("click"===t.type||13===i||32===i){t.preventDefault();const i=e.parentNode;let n=parseInt(e.dataset.rating),a=parseInt(i.dataset.recipe);if(!a)for(var r=e.parentNode;r&&r!=document;r=r.parentNode)if(r.matches(".wprm-recipe-container")){a=parseInt(r.dataset.recipeId);break}if("scroll"===wprmp_public.settings.user_ratings_type&&window.WPRecipeMaker.userRating.canJumpToComments())window.WPRecipeMaker.userRating.jumpToCommentRating(n);else{const e=i.dataset.modalUid;window.WPRecipeMaker.modal.open(e,{recipe:a,rating:n})}}},updateRatingDisplay(e,t){const i=document.querySelectorAll(".wprm-recipe-rating-recipe-"+e);for(let r of i){let e=r.dataset.hasOwnProperty("decimals")?parseInt(r.dataset.decimals):2;e=0<=e?e:2,t.roundedAverage=Number(t.average.toFixed(e)),t.formattedAverage=(0,a.V)(t.average,e);const i=r.querySelector(".wprm-recipe-rating-details");if(i)i.innerHTML=window.WPRecipeMaker.userRating.getRatingDetailsText(t);else{const e=r.querySelector(".wprm-recipe-rating-average"),i=r.querySelector(".wprm-recipe-rating-count");e&&(e.innerText=t.formattedAverage),i&&(i.innerText=t.count)}const n=t.roundedAverage;for(let t=1;t<=5;t++){let e=r.querySelector(".wprm-rating-star-"+t);if(e)if(e.classList.remove("wprm-rating-star-full"),e.classList.remove("wprm-rating-star-empty"),e.classList.remove("wprm-rating-star-33"),e.classList.remove("wprm-rating-star-50"),e.classList.remove("wprm-rating-star-66"),t<=n)e.classList.add("wprm-rating-star-full");else{const i=0+n-t+1;0<i&&i<=.33?e.classList.add("wprm-rating-star-33"):0<i&&i<=.5?e.classList.add("wprm-rating-star-50"):0<i&&i<=.66?e.classList.add("wprm-rating-star-66"):0<i&&i<=1?e.classList.add("wprm-rating-star-full"):e.classList.add("wprm-rating-star-empty")}}r.classList.contains("wprm-user-rating")&&(0<t.user?(r.classList.remove("wprm-user-rating-not-voted"),r.classList.add("wprm-user-rating-has-voted")):(r.classList.add("wprm-user-rating-not-voted"),r.classList.remove("wprm-user-rating-has-voted")))}},getRatingDetailsText(e){let t="",i="";if(i=0===e.count?wprmp_public.settings.rating_details_zero:1===e.count?wprmp_public.settings.rating_details_one:wprmp_public.settings.rating_details_multiple,0<e.user){const e=wprmp_public.settings.rating_details_user_voted;i=i.replace("%not_voted%",""),i=i.replace("%voted%",e)}else{const e=wprmp_public.settings.rating_details_user_not_voted;i=i.replace("%voted%",""),i=i.replace("%not_voted%",e)}return i=i.replace("%average%",'<span class="wprm-recipe-rating-average">'+e.formattedAverage+"</span>"),i=i.replace("%votes%",'<span class="wprm-recipe-rating-count">'+e.count+"</span>"),i=i.replace("%user%",'<span class="wprm-recipe-rating-user">'+e.user+"</span>"),t=i.trim(),t},addRatingForRecipe(e,t){let i={Accept:"application/json","Content-Type":"application/json"};return 0<parseInt(wprmp_public.user)&&(i["X-WP-Nonce"]=wprm_public.api_nonce),fetch(`${wprmp_public.endpoints.user_rating}/${t}`,{method:"POST",headers:i,credentials:"same-origin",body:JSON.stringify({data:e})}).then((i=>i.ok?i.json():window.WPRecipeMaker.userRating.addRatingForRecipeThroughAjax(e,t))).then((e=>e))},addRatingForRecipeThroughAjax:(e,t)=>fetch(wprm_public.ajax_url,{method:"POST",credentials:"same-origin",body:"action=wprm_user_rate_recipe&security="+encodeURIComponent(wprm_public.nonce)+"&recipe_id="+encodeURIComponent(t)+"&data="+encodeURIComponent(JSON.stringify(e)),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).then((e=>!!e.ok&&e.json())).then((e=>!!e.success&&e.data)),getCommentContainerElement(){let e=[".comment-form-wprm-rating","#llc_comments"];wprmp_public.settings.user_ratings_force_comment_scroll_to&&e.unshift(wprmp_public.settings.user_ratings_force_comment_scroll_to);for(let t of e){const e=document.querySelector(t);if(e)return e}return!1},canJumpToComments:()=>!!wprmp_public.settings.features_comment_ratings&&!!window.WPRecipeMaker.userRating.getCommentContainerElement(),jumpToCommentRating(e){let t=window.WPRecipeMaker.userRating.getCommentContainerElement();if(t){const i=()=>{const t=document.querySelector(".comment-form-wprm-rating");if(t){const i=t.querySelectorAll("input");for(let t of i)if(e===parseInt(t.value)){t.click();break}}const i=document.getElementById("comment");i&&i.focus()};!!wprmp_public.settings.user_ratings_force_comment_scroll_to_smooth?(0,s.A)(t,{verticalOffset:-100,speed:250}).then(i):(t.scrollIntoView({behavior:"instant"}),i())}}},function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}((()=>{window.WPRecipeMaker.userRating.init()}))},4123:()=>{var e;window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.checkboxes={initModern:()=>{document.addEventListener("change",(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode)if(t.matches(".wprm-checkbox")){window.WPRecipeMaker.checkboxes.toggle(t,e);break}}),!1)},toggle:(e,t)=>{t.preventDefault();for(var i=e.parentNode;i&&i!=document;i=i.parentNode)if(i.matches("li")){i.classList.toggle("wprm-checkbox-is-checked");break}},initLegacy:()=>{let e="";e="checkbox"==wprmp_public.settings.template_ingredient_list_style&&"checkbox"==wprmp_public.settings.template_instruction_list_style?"li.wprm-recipe-ingredient, li.wprm-recipe-instruction":"checkbox"==wprmp_public.settings.template_ingredient_list_style?"li.wprm-recipe-ingredient":"li.wprm-recipe-instruction";const t=document.querySelectorAll(e);for(let i of t){i.classList.add("wprm-list-checkbox-container");let e=document.createElement("span");e.classList.add("wprm-list-checkbox"),i.insertBefore(e,i.firstChild)}document.addEventListener("click",(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode)if(t.matches(".wprm-list-checkbox")){window.WPRecipeMaker.checkboxes.click(t,e);break}}),!1)},click:(e,t)=>{t.preventDefault();for(var i=e.parentNode;i&&i!=document;i=i.parentNode)if(i.matches(".wprm-list-checkbox-container")){e.classList.toggle("wprm-list-checkbox-checked"),i.classList.toggle("wprm-list-checkbox-checked");break}}},e=()=>{"legacy"!==wprmp_public.settings.recipe_template_mode||"checkbox"!=wprmp_public.settings.template_ingredient_list_style&&"checkbox"!=wprmp_public.settings.template_instruction_list_style||window.WPRecipeMaker.checkboxes.initLegacy(),"modern"===wprmp_public.settings.recipe_template_mode&&window.WPRecipeMaker.checkboxes.initModern()},"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)},4096:()=>{var e;window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.preventSleep={wakeLockApi:!1,wakeLock:!1,init(){if("wakeLock"in navigator&&"request"in navigator.wakeLock&&(this.wakeLockApi=navigator.wakeLock),this.wakeLockApi){const e=document.querySelectorAll(".wprm-prevent-sleep");if(0<e.length)for(let t of e){t.style.display="";t.querySelector(".wprm-prevent-sleep-checkbox").addEventListener("change",(function(e){WPRecipeMaker.preventSleep.checkboxChange(e.target)}),!1)}}},checkboxChange(e){e.checked?this.lock():this.unlock()},setCheckboxesState(e){const t=document.querySelectorAll(".wprm-prevent-sleep-checkbox");for(let i of t)i.checked=e},async lock(){try{this.wakeLock=await this.wakeLockApi.request("screen"),this.wakeLock.addEventListener("release",(e=>{this.wakeLock=!1,this.setCheckboxesState(!1)})),this.setCheckboxesState(!0)}catch(e){this.setCheckboxesState(!1)}},unlock(){this.wakeLock&&(this.wakeLock.release(),this.wakeLock=!1),this.setCheckboxesState(!1)}},e=()=>{window.WPRecipeMaker.preventSleep.init()},"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)},5095:()=>{var e;window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.privateNotes={load:()=>{document.addEventListener("click",(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode)if(t.matches(".wprm-private-notes-container:not(.wprm-private-notes-container-disabled)")){window.WPRecipeMaker.privateNotes.click(t,e);break}}),!1),window.WPRecipeMaker.privateNotes.init()},init:()=>{const e=document.querySelectorAll(".wprm-private-notes-container");for(let t of e)window.WPRecipeMaker.privateNotes.showNotes(t)},currentlyEditing:!1,click:(e,t)=>{t.preventDefault(),window.WPRecipeMaker.privateNotes.startEditing(e)},startEditing:e=>{if(parseInt(e.dataset.recipe)&&!window.WPRecipeMaker.privateNotes.currentlyEditing){window.WPRecipeMaker.privateNotes.currentlyEditing=!0,e.classList.add("wprm-private-notes-editing");const t=e.querySelector("textarea"),i=t.scrollHeight<100?100:t.scrollHeight;t.style.height=i+"px",window.onbeforeunload=()=>{window.WPRecipeMaker.privateNotes.stopEditing(e)},t.addEventListener("blur",(()=>{window.WPRecipeMaker.privateNotes.stopEditing(e)}),!1),t.addEventListener("input",(()=>{const e=t.scrollHeight<100?100:t.scrollHeight;t.style.height=e+"px"}),!1),t.focus(),t.setSelectionRange(t.value.length,t.value.length)}},stopEditing:e=>{window.WPRecipeMaker.privateNotes.currentlyEditing=!1;const t=e.querySelector("textarea"),i=t.value.trim(),r=t.cloneNode(!0);t.parentNode.replaceChild(r,t),e.classList.remove("wprm-private-notes-editing");const n=parseInt(e.dataset.recipe);window.WPRecipeMaker.privateNotes.saveNotes(n,i),window.WPRecipeMaker.privateNotes.showNotes(e)},showNotes:e=>{const t=parseInt(e.dataset.recipe);if(t){const i=window.WPRecipeMaker.privateNotes.getNotes(t,e),r=e.querySelector("textarea");r&&(r.value=i),i?e.classList.add("wprm-private-notes-has-notes"):e.classList.remove("wprm-private-notes-has-notes");const n=e.querySelector(".wprm-private-notes-user");n&&(n.innerHTML=i)}},recipeNotes:{},getNotes:(e,t=!1)=>{let i="";if(window.WPRecipeMaker.privateNotes.recipeNotes.hasOwnProperty(`recipe-${e}`))return i=window.WPRecipeMaker.privateNotes.recipeNotes[`recipe-${e}`],i;if(t){const e=t.querySelector("textarea");e&&(i=e.value)}if(!i){const t=localStorage.getItem(`wprm-recipe-private-notes-${e}`);t&&(i=t)}return i},saveNotes:(e,t)=>{e&&(window.WPRecipeMaker.privateNotes.recipeNotes[`recipe-${e}`]=t,0<parseInt(wprmp_public.user)?fetch(`${wprmp_public.endpoints.private_notes}/${e}`,{method:"POST",headers:{"X-WP-Nonce":wprm_public.api_nonce,Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({notes:t})}).then((e=>!!e.ok&&e.json())).then((i=>{!1===i?window.WPRecipeMaker.privateNotes.saveNotesInLocalStorage(e,t):window.WPRecipeMaker.privateNotes.saveNotesInLocalStorage(e,!1)})):window.WPRecipeMaker.privateNotes.saveNotesInLocalStorage(e,t))},saveNotesInLocalStorage:(e,t)=>{t?localStorage.setItem(`wprm-recipe-private-notes-${e}`,t):localStorage.removeItem(`wprm-recipe-private-notes-${e}`)},hideEmpty:()=>{const e=document.querySelectorAll(".wprm-private-notes-container");for(let t of e){const e=parseInt(t.dataset.recipe);if(e){if(!window.WPRecipeMaker.privateNotes.getNotes(e,t)){const e=t.previousElementSibling;e&&e.classList.contains("wprm-recipe-private-notes-header")&&e.remove(),t.remove()}}}}},e=()=>{window.WPRecipeMaker.privateNotes.load()},"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)},2359:()=>{var e;window.WPRecipeMaker=void 0===window.WPRecipeMaker?{}:window.WPRecipeMaker,window.WPRecipeMaker.userRatingModal={init(){if(wprmp_public.settings.user_ratings_open_url_parameter){if(new URLSearchParams(window.location.search).has(wprmp_public.settings.user_ratings_open_url_parameter)){const e=document.querySelectorAll(".wprm-user-rating, .wprm-recipe-user-ratings-modal");for(let t of e)if(t.dataset.hasOwnProperty("modalUid")&&t.dataset.hasOwnProperty("recipe")){const e=t.dataset.modalUid;let i=t.dataset.recipe;i=parseInt(i),i&&setTimeout((()=>{window.WPRecipeMaker.modal.open(e,{recipe:i,rating:0})}));break}}}document.addEventListener("wprm-modal-open",(e=>{"user-rating"===e.detail.type&&window.WPRecipeMaker.userRatingModal.opened(e.detail.uid,e.detail.modal,e.detail.data)})),document.addEventListener("wprm-modal-close",(e=>{"user-rating"===e.detail.type&&window.WPRecipeMaker.userRatingModal.closed(e.detail.uid,e.detail.modal,e.detail.data)})),document.addEventListener("wprm-comment-rating-change",(e=>{e.detail.hasOwnProperty("container")&&e.detail.container.classList.contains("wprm-user-ratings-modal-stars")&&window.WPRecipeMaker.userRatingModal.ratingChange(e.detail.rating)})),document.addEventListener("click",(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode){if(t.matches(".wprm-cta-rating-modal")||t.matches(".wprm-recipe-user-ratings-modal")){e.preventDefault();const i=t.dataset.modalUid;let r=t.dataset.recipe;r=parseInt(r),r&&window.WPRecipeMaker.modal.open(i,{recipe:r,rating:0});break}if(t.matches(".wprm-user-rating-modal-comment-suggestion")){e.preventDefault();const i=t.innerText,r=document.querySelector(".wprm-user-rating-modal-comment");i&&r&&(r.value=i,window.WPRecipeMaker.userRatingModal.checkFields());break}if(t.matches(".wprm-user-rating-summary-details-no-comments")){e.preventDefault(),window.WPRecipeMaker.userRatingModal.ratingsWithoutCommentsPopup(t);break}}}),!1)},modalUid:!1,currentRecipe:!1,currentCommentForRecipe:{},opened(e,t,i){window.WPRecipeMaker.userRatingModal.modalUid=e,window.WPRecipeMaker.userRatingModal.setTitle(wprmp_public.settings.user_ratings_modal_title),window.WPRecipeMaker.userRatingModal.displayMessage('<div class="wprm-loader"></div>');const r=t.querySelector(".wprm-user-ratings-modal-stars-container").querySelectorAll("input");if(r[0].click(),i.hasOwnProperty("rating")){const e=parseInt(i.rating);for(let t of r)if(e===parseInt(t.value)){t.click();break}}const n=t.querySelector('input[name="wprm-user-rating-recipe-id"]');n.value=i.hasOwnProperty("recipe")?i.recipe:0,window.WPRecipeMaker.manager.getRecipe(n.value).then((e=>{window.WPRecipeMaker.userRatingModal.currentRecipe=e,window.WPRecipeMaker.userRatingModal.displayMessage(!1);const i=t.querySelector(".wprm-user-rating-modal-comment");i.value="",e&&window.WPRecipeMaker.userRatingModal.currentCommentForRecipe.hasOwnProperty(e.id)&&(i.value=window.WPRecipeMaker.userRatingModal.currentCommentForRecipe[e.id]),window.WPRecipeMaker.userRatingModal.checkFields(),window.WPRecipeMaker.userRatingModal.displayError(!1),window.WPRecipeMaker.userRatingModal.displayWaiting(!1);t.querySelector(".wprm-user-ratings-modal-recipe-name").innerHTML=e?e.data.name:""}))},ratingChange(e){window.WPRecipeMaker.userRatingModal.checkFields()},checkFields(){const e=document.querySelector(".wprm-popup-modal-user-rating"),t=0<parseInt(wprmp_public.user);t&&e.classList.add("wprm-user-rating-modal-logged-in");const i=e.querySelector(".wprm-user-rating-modal-comment"),r=e.querySelector('input[name="wprm-user-rating-name"]'),n=e.querySelector('input[name="wprm-user-rating-email"]');i.required=wprmp_public.settings.user_ratings_require_comment,r.required=!t&&wprmp_public.settings.user_ratings_require_name,n.required=!t&&wprmp_public.settings.user_ratings_require_email;const a=new FormData(i.form),o=Object.fromEntries(a),s=parseInt(o["wprm-user-rating-stars"]),c=e.querySelector(".wprm-user-rating-modal-comment-suggestions-container");if(c&&(c.style.display=window.WPRecipeMaker.userRatingModal.shouldSuggestionsShow(s)?"block":"none"),!wprmp_public.settings.user_ratings_require_comment){const t=e.querySelector(".wprm-user-rating-modal-submit-comment"),r=e.querySelector(".wprm-user-rating-modal-submit-no-comment");i.value?(t.style.display="block",r.style.display="none"):(t.style.display="none",r.style.display="block")}},shouldSuggestionsShow(e){if("never"!==wprmp_public.settings.user_ratings_comment_suggestions_enabled){const t={always:1,"2_star":2,"3_star":3,"4_star":4,"5_star":5};if(t.hasOwnProperty(wprmp_public.settings.user_ratings_comment_suggestions_enabled)&&e>=t[wprmp_public.settings.user_ratings_comment_suggestions_enabled])return!0}return!1},submit(e){const t=new FormData(e),i=Object.fromEntries(t),r=parseInt(i["wprm-user-rating-recipe-id"]),n=parseInt(i["wprm-user-rating-stars"]),a=i["wprm-user-rating-comment"].trim(),o=i["wprm-user-rating-name"].trim(),s=i["wprm-user-rating-email"].trim();if(n<=0||n>5)return window.WPRecipeMaker.userRatingModal.displayError("rating"),!1;if(0===parseInt(wprmp_public.user)){if(!o&&wprmp_public.settings.user_ratings_require_name)return window.WPRecipeMaker.userRatingModal.displayError("name"),!1;if(!s&&wprmp_public.settings.user_ratings_require_email)return window.WPRecipeMaker.userRatingModal.displayError("email"),!1}window.WPRecipeMaker.userRatingModal.displayError(!1),window.WPRecipeMaker.userRatingModal.displayWaiting(!0);const c={post_id:wprm_public.post_id,rating:n,comment:a,name:o,email:s};window.WPRecipeMaker.manager.getRecipe(r).then((e=>{const t=e=>{let t="";t=!1===e?wprmp_public.settings.user_ratings_problem_message:wprmp_public.settings.user_ratings_thank_you_message_with_comment,t?(window.WPRecipeMaker.userRatingModal.setTitle(wprmp_public.settings.user_ratings_thank_you_title),window.WPRecipeMaker.userRatingModal.displayMessage(t)):window.WPRecipeMaker.modal.close(window.WPRecipeMaker.userRatingModal.modalUid)};e?e.addRating(c).then((e=>{window.WPRecipeMaker.userRatingModal.displayWaiting(!1),t(e)})):t(!1)}))},displayError(e){const t=document.querySelector("#wprm-user-rating-modal-errors");t&&t.querySelectorAll("div").forEach((t=>{e&&t.id==="wprm-user-rating-modal-error-"+e?t.style.display="block":t.style.display=""}))},displayWaiting(e){const t=document.querySelector("#wprm-user-rating-modal-waiting");t&&(t.style.display=e?"inline-block":"");const i=document.querySelectorAll(".wprm-user-rating-modal-submit-rating, .wprm-user-rating-modal-submit-comment");for(let r of i)r.disabled=e},displayMessage(e){const t=document.querySelector("#wprm-user-ratings-modal-stars-form"),i=document.querySelector("#wprm-user-ratings-modal-message");!1===e?(t.style.display="block",i.style.display="none"):(t.style.display="none",i.innerHTML=e,i.style.display="block")},setTitle(e){const t=document.querySelector("#wprm-popup-modal-user-rating-title");t&&e&&(t.innerHTML=e)},closed(e,t,i){const r=window.WPRecipeMaker.userRatingModal.currentRecipe;if(r){let e="";if("none"!==document.querySelector("#wprm-user-ratings-modal-stars-form").style.display){e=t.querySelector(".wprm-user-rating-modal-comment").value}window.WPRecipeMaker.userRatingModal.currentCommentForRecipe[r.id]=e}window.WPRecipeMaker.userRatingModal.currentRecipe=!1,window.WPRecipeMaker.userRatingModal.modalUid=!1},ratingsWithoutCommentsPopup(e){const t=e.dataset.modalUid;if(t){const i=document.getElementById("wprm-popup-modal-"+t);window.WPRecipeMaker.modal.open(t);const r=i.querySelector(".wprm-loader"),n=i.querySelector(".wprm-popup-modal-user-rating-summary-error"),a=i.querySelector(".wprm-popup-modal-user-rating-summary-ratings");r.style.display="block",n.style.display="none",a.innerHTML="";const o=e.dataset.recipeId,s=e.dataset.postId;let c={Accept:"application/json","Content-Type":"application/json"};return 0<parseInt(wprmp_public.user)&&(c["X-WP-Nonce"]=wprm_public.api_nonce),fetch(`${wprmp_public.endpoints.user_rating}/summary-popup`,{method:"POST",headers:c,credentials:"same-origin",body:JSON.stringify({recipeId:o,postId:s})}).then((e=>!!e.ok&&e.json())).then((e=>{r.style.display="none",e&&e.html?a.innerHTML=e.html:n.style.display="block"}))}}},e=()=>{window.WPRecipeMaker.userRatingModal.init()},"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)},2687:(e,t,i)=>{"use strict";i.d(t,{L:()=>s,V:()=>o});var r=i(2667),n=i.n(r);const a={"¼":"1/4","½":"1/2","¾":"3/4","⅐":"1/7","⅑":"1/9","⅒":"1/10","⅓":"1/3","⅔":"2/3","⅕":"1/5","⅖":"2/5","⅗":"3/5","⅘":"4/5","⅙":"1/6","⅚":"5/6","⅛":"1/8","⅜":"3/8","⅝":"5/8","⅞":"7/8"};function o(e,t=2,i=!1){const r=void 0!==window.wprmp_public?wprmp_public.settings.decimal_separator:wprmp_admin.settings.decimal_separator,o="comma"===r?",":".",s="comma"===r?".":",";let c=e,p=!1;if(i){if(void 0!==window.wprmp_public?wprmp_public.settings.fractions_enabled:wprmp_admin.settings.fractions_enabled){const t=void 0!==window.wprmp_public?wprmp_public.settings.fractions_use_mixed:wprmp_admin.settings.fractions_use_mixed,i=void 0!==window.wprmp_public?wprmp_public.settings.fractions_use_symbols:wprmp_admin.settings.fractions_use_symbols;let r=parseInt(void 0!==window.wprmp_public?wprmp_public.settings.fractions_max_denominator:wprmp_admin.settings.fractions_max_denominator);r=r>1?r:8;const o=n()(e,r,t);if(o&&3===o.length&&!isNaN(o[0])&&!isNaN(o[1])&&!isNaN(o[2])){let e="";if(0<o[0]&&(e+=`${o[0]} `,e=e.replace(/\B(?=(\d{3})+(?!\d))/g,s)),0<o[1]?0<o[2]&&(e+=1===o[2]?o[1]:`${o[1]}/${o[2]}`):0===o[0]&&(e+=`1/${r}`),e){if(i){e=" "+e+" ";for(let t of Object.keys(a)){const i=a[t];e=e.replace(` ${i} `,` ${t} `)}}c=e.trim(),p=!0}}}}if(!p){t=parseInt(t),(isNaN(t)||t<0)&&(t=0);do{if(c=parseFloat(parseFloat(e).toFixed(t)),3<++t)break}while(0==c);c=""+c,"comma"===r&&(c=c.replace(".",","));const i=c.split(o);i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),c=i.join(o)}return c}function s(e){const t="number"==typeof e;if(e=""+e,!t){if("comma"===(void 0!==window.wprmp_public?wprmp_public.settings.decimal_separator:wprmp_admin.settings.decimal_separator)){const t=e.indexOf(".");if(-1!==t&&e.length-t>3){const i=e.substr(0,t);0!==parseInt(i)&&(e=e.replace(".",""))}}else{const t=e.indexOf(",");if(-1!==t&&e.length-t>3){const i=e.substr(0,t);0!==parseInt(i)&&(e=e.replace(",",""))}}}var i=(e=(e=(e=(e=(e=((e=(e=(e=(e=(e=e.replace(",",".")).replace(" to ","-")).replace("–","-")).replace("—","-")).replace(" - ","-"))+"").replace(/(\u00BC|\u00BD|\u00BE|\u2150|\u2151|\u2152|\u2153|\u2154|\u2155|\u2156|\u2157|\u2158|\u2159|\u215A|\u215B|\u215C|\u215D|\u215E)/,(function(e,t){return" "+a[t]+" "}))).replace(/(<([^>]+)>)/gi,"")).replace(/(\[([^\]]+)\])/gi,"")).replace(/[^\d\s\.\/-]/gi,"")).trim()).split(" "),r=!1;if(""!==e){r=0;for(var n=0;n<i.length;n++)if(""!==i[n].trim()){var o=i[n].split("/",2),s=parseFloat(o[0]);if(void 0!==o[1]){var c=parseFloat(o[1]);0!==c&&(s/=c)}isNaN(s)||(r+=s)}}return r}},942:(e,t,i)=>{"use strict";i.d(t,{f:()=>n});let r={};function n(e,t="wp-recipe-maker"){return r.hasOwnProperty(e)?r[e]:e}window.hasOwnProperty("wprm_public")&&wprm_public.hasOwnProperty("translations")&&(r={...r,...wprm_public.translations}),window.hasOwnProperty("wprm_admin")&&wprm_admin.hasOwnProperty("translations")&&(r={...r,...wprm_admin.translations})},2667:e=>{var t=function(e,t,i){var r=Math.floor(e),n=1,a=r+1,o=1;if(e!==r)for(;n<=t&&o<=t;){var s=(r+a)/(n+o);if(e===s){n+o<=t?(n+=o,r+=a,o=t+1):n>o?o=t+1:n=t+1;break}e<s?(a=r+a,o=n+o):(r+=a,n+=o)}if(n>t&&(n=o,r=a),!i)return[0,r,n];var c=Math.floor(r/n);return[c,r-c*n,n]};t.cont=function(e,t,i){for(var r=e<0?-1:1,n=e*r,a=0,o=1,s=0,c=1,p=0,l=0,d=Math.floor(n);p<t&&(s=(d=Math.floor(n))*o+a,l=d*p+c,!(n-d<5e-8));)n=1/(n-d),a=o,o=s,c=p,p=l;if(l>t&&(p>t?(l=c,s=a):(l=p,s=o)),!i)return[0,r*s,l];var m=Math.floor(r*s/l);return[m,r*s-m*l,l]},"undefined"==typeof DO_NOT_EXPORT_FRAC&&(e.exports=t)}},e=>{var t,i=(t=3345,e(e.s=t));(WPRecipeMaker=void 0===WPRecipeMaker?{}:WPRecipeMaker)["wp-recipe-maker-premium/dist/public-elite"]=i}]);